# Lesson 11

```markdown
# Ansible Deployment for Notes App

Этот проект содержит Ansible роль `notes_app` для развертывания многосервисного приложения заметок, основанного на Docker Compose. В приложении используются сервисы на Go, Python (Flask), PostgreSQL и обратный прокси Nginx с SSL.
.
├── Deploy.yml # Основной playbook для развертывания
├── Inventory/
│ └── инвентарь.ini # Инвентори с протоколами и хостами
├── group_vars/
│ └── all/
│ └── vault.yml # Секретные переменные (пароли и т.п.)
├── roles/
│ └── Notes_app/ # Роль Ansible для развертывания Notes App
│ ├── defaults/
│ │ └── main.yml # Переменные по умолчанию
│ ├── files/ # Все необходимые файлы проекта
│ │ ├── docker-compose.yml
│ │ ├── go/
│ │ ├── nginx/
│ │ └── python/
│ ├── handlers/
│ │ └── main.yml # Обработчики (обработчики)
│ ├── Tasks/
│ │ └── main.yml # Основные задачи Ansible
│ ├── шаблоны/ # Jinja2 шаблоны (если есть)
│ ├── тесты/
│ └── vars/
│ └── main.yml #Переменные ролики
---
## Предварительные требования
- Ansible (рекомендуется версия 2.10+)
- Доступ к целевым серверам SSH (указанным в `inventory.ini`)
- На сервере должны быть установлены Docker и Docker Compose
- Настроен файл `group_vars/all/vault.yml` с необходимыми секретами
---
## Как использовать
1. Клонируйте репозиторий:
```
git clone <URL_вашего_репозитория>
cd <папка_репозитория>
```
2. Настройте файл `inventories/inventory.ini`, указав реальные IP или хостнеймы ваших серверов.

3. Отредактируйте файл с секретами `group_vars/all/vault.yml`, например, пароли базы данных.

4. Запустите развертывание командой:

```
ansible-playbook -i inventories/inventory.ini deploy.yml
```
Аппликация будет развернута в соответствии с ролью `notes_app`, включая сборку Docker образов и запуск контейнеров через `docker-compose`.
---
## Описание сервисов и конфигураций

- **PostgreSQL** — сервис базы данных (пароли хранятся в `vault.yml`).
- **Go приложение** — API на Go, запускается в контейнере.
- **Python приложение** — Flask API.
- **Nginx** — обратный прокси с SSL (используются файлы сертификатов из роли).

Все исходники сервисов и docker-compose находятся в директории `roles/notes_app/files`.

---

## Просмотр и тестирование

После успешного развертывания вы сможете обращаться к сервисам:

- Python API: `http://<host>/python/notes`
- Go API: `http://<host>/go/notes`
- Через Nginx с HTTPS (если настроено и сертификаты корректны).

---

## Как остановить приложение

На целевом сервере в директории с `docker-compose.yml` можно выполнить:

```

docker-compose down
