# Lesson 14

---

# ‚úÖ –¢–µ–æ—Ä–∏—è: –∑–∞—á–µ–º –Ω—É–∂–µ–Ω Redis –≤ –Ω–∞—à–µ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–µ

## üí° –ß—Ç–æ —Ç–∞–∫–æ–µ Redis

Redis ‚Äî —ç—Ç–æ —Å–≤–µ—Ä—Ö–±—ã—Å—Ç—Ä–∞—è **in-memory** (–≤ –ø–∞–º—è—Ç–∏) –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, –∞ –Ω–µ –Ω–∞ –¥–∏—Å–∫–µ (—Ö–æ—Ç—è –º–æ–∂–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å–Ω–∞–ø—à–æ—Ç—ã –Ω–∞ –¥–∏—Å–∫ –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏).

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ –∫–∞–∫ **–∫—ç—à**, –æ—á–µ—Ä–µ–¥—å, pub/sub-–±—Ä–æ–∫–µ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Å–ª–æ–≤–∞—Ä–∏, —Å–ø–∏—Å–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞).

---

## üéØ –ü–æ—á–µ–º—É Redis –ø–æ–ª–µ–∑–µ–Ω –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º

‚úÖ –ë—ã—Å—Ç—Ä–µ–µ PostgreSQL –∏ MongoDB –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ (–º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã –ø—Ä–æ—Ç–∏–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥)
‚úÖ –†–∞–∑–≥—Ä—É–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ë–î
‚úÖ –£–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üì¶ –ì–¥–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å Redis –≤ –Ω–∞—à–µ–º ¬´Notes & Tasks¬ª

–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–¥–µ–π:

### 1Ô∏è‚É£ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

–ù–∞–ø—Ä–∏–º–µ—Ä:

* –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫ (`/notes`) –∏–ª–∏ –∑–∞–¥–∞—á (`/tasks`).
* –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ ‚Äî –±–µ—Ä—ë–º –∏–∑ PostgreSQL/MongoDB –∏ –∫–ª–∞–¥—ë–º –≤ Redis.
* –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö ‚Äî –æ—Ç–¥–∞—ë–º –∏–∑ Redis.

**–í—ã–≥–æ–¥–∞**: —É–º–µ–Ω—å—à–∞–µ–º –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—ã, —É—Å–∫–æ—Ä—è–µ–º –æ—Ç–≤–µ—Ç—ã.

---

### 2Ô∏è‚É£ Rate limiting

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

* –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –±–æ–ª–µ–µ 10 POST-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ `/notes` –∏ `/tasks`.
* Redis –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—á—ë—Ç—á–∏–∫–æ–≤ —Å TTL (time to live).

**–í—ã–≥–æ–¥–∞**: –∑–∞—â–∏—â–∞–µ–º —Å–µ—Ä–≤–∏—Å –æ—Ç —Å–ø–∞–º–∞ –∏ DDoS.

---

### 3Ô∏è‚É£ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL

–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å ¬´–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏¬ª –∫—ç—à–∞:

* –ù–∞–ø—Ä–∏–º–µ—Ä, –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –Ω–∞ 60 —Å–µ–∫—É–Ω–¥.
* –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è.

**–í—ã–≥–æ–¥–∞**: –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏, –Ω–µ—Ç ¬´–≤–µ—á–Ω–æ–≥–æ¬ª —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è.

---

### 4Ô∏è‚É£ Pub/Sub

–î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä:

* Redis –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é –∏ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–æ–±—ã—Ç–∏—è.
* –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —É–≤–µ–¥–æ–º–ª—è—Ç—å –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.

---

## üöÄ –¢–∏–ø–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å Redis

‚úÖ –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–ª–∏–µ–Ω—Ç–∞:

1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ Redis ‚Üí –µ—Å—Ç—å –∫—ç—à ‚Üí –æ—Ç–¥–∞—ë–º
2Ô∏è‚É£ –ù–µ—Ç ‚Üí –±–µ—Ä—ë–º –∏–∑ –ë–î ‚Üí –∫–ª–∞–¥—ë–º –≤ Redis ‚Üí –æ—Ç–¥–∞—ë–º

---

## üí¨ –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è

–ö–ª–∏–µ–Ω—Ç —á–∞—Å—Ç–æ –¥–µ–ª–∞–µ—Ç GET /tasks:

‚úÖ –ë–µ–∑ Redis:

* Flask –∏–¥—ë—Ç –≤ MongoDB –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.
* Mongo –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω.

‚úÖ –° Redis:

* Flask —Å–Ω–∞—á–∞–ª–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤ Redis.
* –ï—Å–ª–∏ –µ—Å—Ç—å –∫—ç—à ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.
* –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí MongoDB ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Redis.

---

## ‚ö°Ô∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –æ—Ç–≤–µ—Ç—ã (–º–µ–Ω—å—à–µ latency)
‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

---

## üë®‚Äçüíª –ß—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ

* –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `redis`
* –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `redis://redis:6379/0`)
* –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫—ç—à–∞ –≤ GET-—ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
* –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∫–∏ –∏–∑ –ë–î

---

## üóÇÔ∏è –ö–∞–∫ —ç—Ç–æ –≤–ø–∏—à–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç

–í `docker-compose.yml` –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å:

```yaml
redis:
  image: redis:7
  ports:
    - "6379:6379"
```

–í Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `redis-py`)
‚úÖ –í —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö GET –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫—ç—à–∞

---

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

> Redis ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏ —Ä–∞–∑–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–∏—Å–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–Ω –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–¥–∞–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫–∏ –∏ –∑–∞–¥–∞—á–∏, —É–º–µ–Ω—å—à–∏–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ PostgreSQL –∏ MongoDB.

---

